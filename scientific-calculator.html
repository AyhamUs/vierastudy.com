<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>VieraStudy - Scientific Calculator</title>
    <meta name="description" content="Free scientific calculator by VieraStudy. Perform complex calculations, trigonometry, and advanced math operations.">
    <meta name="keywords" content="VieraStudy, scientific calculator, math calculator, trigonometry, advanced math, student calculator">
    <link rel="canonical" href="https://vierastudy.com/scientific-calculator">
    <!-- Open Graph tags -->
    <meta property="og:title" content="VieraStudy - Scientific Calculator">
    <meta property="og:description" content="Free scientific calculator by VieraStudy. Perform complex calculations, trigonometry, and advanced math operations.">
    <meta property="og:url" content="https://vierastudy.com/scientific-calculator">
    <meta property="og:image" content="https://vierastudy.com/vierastudy.png">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="VieraStudy">
    <!-- Twitter Card tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="VieraStudy - Scientific Calculator">
    <meta name="twitter:description" content="Free scientific calculator by VieraStudy. Perform complex calculations, trigonometry, and advanced math operations.">
    <meta name="twitter:image" content="https://vierastudy.com/vierastudy.png">
    <link rel="icon" href="vierastudy.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        a {
            text-decoration: none;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
            transition: background 0.3s, color 0.3s;
            overflow-x: hidden;
        }

        body.dark-mode {
            background: #0f172a;
            color: #e2e8f0;
        }

        body.dark-mode .main-content {
            background: #0f172a;
        }

        body.dark-mode .header {
            background: #1e293b;
            color: #e2e8f0;
        }

        body.dark-mode .header h1 {
            color: #e2e8f0;
        }

        body.dark-mode .calculator {
            background: #1e293b;
            border: 1px solid #334155;
        }

        body.dark-mode .display {
            background: #0f172a;
            border-color: #334155;
        }

        body.dark-mode .display-expression {
            color: #94a3b8;
        }

        body.dark-mode .display-result {
            color: #e2e8f0;
        }

        body.dark-mode .calc-btn {
            background: #334155;
            color: #e2e8f0;
            border-color: #475569;
        }

        body.dark-mode .calc-btn:hover {
            background: #475569;
        }

        body.dark-mode .calc-btn.number {
            background: #1e293b;
        }

        body.dark-mode .calc-btn.number:hover {
            background: #334155;
        }

        body.dark-mode .history-panel {
            background: #1e293b;
            border: 1px solid #334155;
        }

        body.dark-mode .history-title {
            color: #e2e8f0;
        }

        body.dark-mode .history-item {
            border-color: #334155;
        }

        body.dark-mode .history-item:hover {
            background: #334155;
        }

        body.dark-mode .history-expression {
            color: #94a3b8;
        }

        body.dark-mode .history-result {
            color: #e2e8f0;
        }

        body.dark-mode .empty-history {
            color: #64748b;
        }

        body.dark-mode .empty-history i {
            color: #475569;
        }

        body.dark-mode .mode-toggle {
            background: #334155;
            color: #94a3b8;
        }

        body.dark-mode .mode-toggle.active {
            background: #84cc16;
            color: white;
        }

        body.dark-mode .mode-toggle:hover:not(.active) {
            background: #475569;
        }

        body.dark-mode .clear-history-btn {
            background: #334155;
            color: #94a3b8;
        }

        body.dark-mode .clear-history-btn:hover {
            background: #ef4444;
            color: white;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: #1e293b;
            color: white;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            overflow-y: auto;
            overflow-x: hidden;
        }

        .logo {
            padding: 30px 25px;
            font-size: 24px;
            font-weight: bold;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo img {
            width: 35px;
            height: 35px;
            object-fit: contain;
        }

        .logo-text {
            color: white;
        }

        .pro-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #1e293b;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 9px;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-menu {
            flex: 1;
            padding: 20px 0;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .nav-item {
            padding: 15px 25px;
            display: flex;
            align-items: center;
            color: #cbd5e1;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }

        .nav-item:hover {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .nav-item.active {
            background: rgba(59, 130, 246, 0.15);
            border-left: 3px solid #3b82f6;
        }

        a[href="/"].nav-item.active,
        a[href="/"].nav-item:hover {
            color: #3b82f6;
        }

        a[href="flashcards"].nav-item.active,
        a[href="flashcards"].nav-item:hover {
            color: #8b5cf6;
        }

        a[href="todo"].nav-item.active,
        a[href="todo"].nav-item:hover {
            color: #10b981;
        }

        a[href="schedule"].nav-item.active,
        a[href="schedule"].nav-item:hover {
            color: #f59e0b;
        }

        a[href="pomodoro"].nav-item.active,
        a[href="pomodoro"].nav-item:hover {
            color: #ef4444;
        }

        a[href="notes"].nav-item.active,
        a[href="notes"].nav-item:hover {
            color: #06b6d4;
        }

        a[href="progress-tracker"].nav-item.active,
        a[href="progress-tracker"].nav-item:hover {
            color: #ec4899;
        }

        a[href="classes"].nav-item.active,
        a[href="classes"].nav-item:hover {
            color: #f97316;
        }

        a[href="settings"].nav-item.active,
        a[href="settings"].nav-item:hover {
            color: #64748b;
        }

        .nav-item i {
            width: 25px;
            margin-right: 15px;
            font-size: 18px;
        }

        .nav-item .fa-home { color: #3b82f6; }
        .nav-item .fa-layer-group { color: #8b5cf6; }
        .nav-item .fa-list-check { color: #10b981; }
        .nav-item .fa-calendar-days { color: #f59e0b; }
        .nav-item .fa-clock { color: #ef4444; }
        .nav-item .fa-book-open { color: #06b6d4; }
        .nav-item .fa-chart-line { color: #ec4899; }
        .nav-item .fa-brain { color: #6366f1; }
        .nav-item .fa-calculator { color: #84cc16; }
        .nav-item .fa-book { color: #f97316; }
        .nav-item .fa-gear, .nav-item .fa-cog { color: #64748b; }

        .ai-dropdown, .math-dropdown {
            position: relative;
        }

        .ai-dropdown .nav-item, .math-dropdown .nav-item {
            padding: 15px 25px;
        }

        .dropdown-header {
            display: flex;
            align-items: center;
            width: 100%;
        }

        .dropdown-header .icon-text {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .dropdown-header i.fa-brain,
        .dropdown-header i.fa-calculator {
            width: 25px;
            margin-right: 15px;
            font-size: 18px;
        }

        .dropdown-header .fa-chevron-down {
            font-size: 12px;
            transition: transform 0.3s;
            margin-left: auto;
        }

        .ai-dropdown.open .fa-chevron-down,
        .math-dropdown.open .fa-chevron-down {
            transform: rotate(180deg);
        }

        .dropdown-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            opacity: 0;
        }

        .ai-dropdown.open .dropdown-content,
        .math-dropdown.open .dropdown-content {
            max-height: 350px;
            opacity: 1;
        }

        .dropdown-item {
            padding: 12px 25px 12px 55px;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            border-left: 3px solid transparent;
            text-decoration: none;
        }

        .dropdown-item:hover {
            background: rgba(59, 130, 246, 0.08);
            color: #3b82f6;
            padding-left: 60px;
            border-left-color: #3b82f6;
        }

        .dropdown-item.active {
            background: rgba(132, 204, 22, 0.1);
            color: #84cc16;
            border-left-color: #84cc16;
        }

        .dropdown-item i {
            width: 18px;
            font-size: 14px;
            text-align: center;
        }

        .ai-dropdown .dropdown-item:nth-child(1) i { color: #6366f1; }
        .ai-dropdown .dropdown-item:nth-child(2) i { color: #6366f1; }
        .ai-dropdown .dropdown-item:nth-child(3) i { color: #6366f1; }
        .ai-dropdown .dropdown-item:nth-child(4) i { color: #6366f1; }

        .math-dropdown .dropdown-item:nth-child(1) i { color: #84cc16; }
        .math-dropdown .dropdown-item:nth-child(2) i { color: #84cc16; }

        .user-profile {
            padding: 20px 25px;
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            visibility: hidden;
        }

        .user-profile.loaded {
            visibility: visible;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-weight: 600;
            font-size: 14px;
        }

        .signout-btn {
            background: rgba(239, 68, 68, 0.1);
            border: none;
            color: #ef4444;
            width: 35px;
            height: 35px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .signout-btn:hover {
            background: #ef4444;
            color: white;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            overflow-y: auto;
        }

        .header {
            background: white;
            padding: 25px 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .header h1 {
            font-size: 28px;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header h1 i {
            color: #84cc16;
        }

        .content {
            padding: 30px 40px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 30px;
        }

        .calculator-wrapper {
            display: flex;
            gap: 30px;
            max-width: 900px;
            width: 100%;
        }

        .calculator {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            width: 400px;
        }

        .mode-toggles {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .mode-toggle {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            background: #f1f5f9;
            color: #64748b;
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .mode-toggle.active {
            background: #84cc16;
            color: white;
        }

        .mode-toggle:hover:not(.active) {
            background: #e2e8f0;
        }

        .display {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: flex-end;
        }

        .display-expression {
            font-size: 16px;
            color: #94a3b8;
            word-break: break-all;
            text-align: right;
            min-height: 24px;
        }

        .display-result {
            font-size: 36px;
            font-weight: 700;
            color: #1e293b;
            word-break: break-all;
            text-align: right;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        .calc-btn {
            padding: 18px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            background: #f8fafc;
            color: #1e293b;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calc-btn:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
        }

        .calc-btn:active {
            transform: translateY(0);
        }

        .calc-btn.number {
            background: white;
            font-size: 20px;
        }

        .calc-btn.operator {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .calc-btn.operator:hover {
            background: #2563eb;
        }

        .calc-btn.equals {
            background: #84cc16;
            color: white;
            border-color: #84cc16;
            grid-column: span 2;
        }

        .calc-btn.equals:hover {
            background: #65a30d;
        }

        .calc-btn.clear {
            background: #ef4444;
            color: white;
            border-color: #ef4444;
        }

        .calc-btn.clear:hover {
            background: #dc2626;
        }

        .calc-btn.function {
            background: #f1f5f9;
            font-size: 14px;
        }

        .calc-btn.function:hover {
            background: #e2e8f0;
        }

        .history-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            width: 300px;
            max-height: 600px;
            overflow-y: auto;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .history-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
        }

        .clear-history-btn {
            padding: 8px 12px;
            background: #f1f5f9;
            border: none;
            border-radius: 8px;
            color: #64748b;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .clear-history-btn:hover {
            background: #ef4444;
            color: white;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .history-item {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
            cursor: pointer;
            transition: background 0.3s;
            border-radius: 10px;
        }

        .history-item:hover {
            background: #f8fafc;
        }

        .history-expression {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 5px;
            word-break: break-all;
        }

        .history-result {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
        }

        .empty-history {
            text-align: center;
            color: #94a3b8;
            padding: 40px 20px;
        }

        .empty-history i {
            font-size: 40px;
            margin-bottom: 15px;
            color: #cbd5e1;
        }

        /* Mobile */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            width: 50px;
            height: 50px;
            background: #3b82f6;
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 998;
        }

        @media (max-width: 900px) {
            .calculator-wrapper {
                flex-direction: column;
                align-items: center;
            }

            .calculator {
                width: 100%;
                max-width: 400px;
            }

            .history-panel {
                width: 100%;
                max-width: 400px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -280px;
                top: 0;
                bottom: 0;
                z-index: 999;
                transition: left 0.3s ease;
            }

            .sidebar.active {
                left: 0;
            }

            .mobile-menu-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .mobile-overlay {
                display: block;
                opacity: 0;
                pointer-events: none;
                transition: opacity 0.3s;
            }

            .mobile-overlay.active {
                opacity: 1;
                pointer-events: auto;
            }

            .header {
                padding: 20px 20px 20px 80px;
            }

            .header h1 {
                font-size: 20px;
            }

            .content {
                padding: 20px;
            }

            .calculator {
                padding: 20px;
            }

            .calc-btn {
                padding: 15px 8px;
                font-size: 14px;
            }

            .calc-btn.number {
                font-size: 18px;
            }

            .display-result {
                font-size: 28px;
            }
        }

        @media (max-width: 480px) {
            .button-grid {
                gap: 6px;
            }

            .calc-btn {
                padding: 12px 6px;
                font-size: 12px;
            }

            .calc-btn.number {
                font-size: 16px;
            }
        }

        /* Bug Report Button */
        .bug-report-btn { background: rgba(251, 191, 36, 0.1); border: none; color: #f59e0b; width: 35px; height: 35px; border-radius: 8px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s; margin-right: 8px; }
        .bug-report-btn:hover { background: #f59e0b; color: white; }
        .bug-report-btn i { font-size: 14px; }
        .bug-modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); z-index: 10000; align-items: center; justify-content: center; padding: 20px; }
        .bug-modal.active { display: flex; }
        .bug-modal-content { background: white; border-radius: 16px; padding: 30px; max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); }
        body.dark-mode .bug-modal-content { background: #1e293b; }
        .bug-modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .bug-modal-title { font-size: 22px; font-weight: 700; color: #1e293b; display: flex; align-items: center; gap: 10px; }
        .bug-modal-title i { color: #f59e0b; }
        body.dark-mode .bug-modal-title { color: #e2e8f0; }
        .bug-close-btn { background: none; border: none; font-size: 24px; color: #94a3b8; cursor: pointer; }
        .bug-close-btn:hover { color: #ef4444; }
        .bug-form-group { margin-bottom: 20px; }
        .bug-form-label { display: block; font-weight: 600; color: #1e293b; margin-bottom: 8px; font-size: 14px; }
        body.dark-mode .bug-form-label { color: #e2e8f0; }
        .bug-form-input, .bug-form-select, .bug-form-textarea { width: 100%; padding: 12px 14px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 14px; font-family: inherit; background: white; color: #1e293b; }
        body.dark-mode .bug-form-input, body.dark-mode .bug-form-select, body.dark-mode .bug-form-textarea { background: #334155; border-color: #475569; color: #e2e8f0; }
        .bug-form-input:focus, .bug-form-select:focus, .bug-form-textarea:focus { outline: none; border-color: #f59e0b; }
        .bug-form-textarea { resize: vertical; min-height: 120px; }
        .bug-page-info { background: #f8fafc; border-radius: 10px; padding: 12px 14px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        body.dark-mode .bug-page-info { background: #334155; }
        .bug-page-info i { color: #3b82f6; }
        .bug-page-info span { font-size: 13px; color: #64748b; }
        body.dark-mode .bug-page-info span { color: #94a3b8; }
        .bug-page-info strong { color: #1e293b; }
        body.dark-mode .bug-page-info strong { color: #e2e8f0; }
        .bug-submit-btn { width: 100%; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: none; padding: 14px; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .bug-submit-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4); }
        .bug-submit-btn:disabled { opacity: 0.7; cursor: not-allowed; }
    </style>
</head>
<body>
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
    </button>
    <div class="mobile-overlay" onclick="toggleMobileMenu()"></div>

    <div class="container">
        <div class="sidebar">
            <div class="logo">
                <img src="vierastudy.png" alt="VieraStudy">
                <span class="logo-text">VieraStudy</span>
            </div>
            
            <nav class="nav-menu">
                <a href="/" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                
                <a href="flashcards" class="nav-item">
                    <i class="fas fa-layer-group"></i>
                    <span>Flashcards</span>
                </a>
                
                <a href="todo" class="nav-item">
                    <i class="fas fa-list-check"></i>
                    <span>To-Do List</span>
                </a>
                
                <a href="schedule" class="nav-item">
                    <i class="fas fa-calendar-days"></i>
                    <span>Study Schedule</span>
                </a>
                
                <a href="pomodoro" class="nav-item">
                    <i class="fas fa-clock"></i>
                    <span>Pomodoro Timer</span>
                </a>
                
                <a href="notes" class="nav-item">
                    <i class="fas fa-book-open"></i>
                    <span>Take Notes</span>
                </a>
                
                <a href="progress-tracker" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress Tracker</span>
                </a>
                
                <div class="ai-dropdown">
                    <div class="nav-item" style="opacity: 0.6; cursor: not-allowed;">
                        <div class="dropdown-header">
                            <div class="icon-text">
                                <i class="fas fa-brain"></i>
                                <span>AI Tools</span>
                                <span style="background: #ef4444; color: white; padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: 600; margin-left: 8px;">Offline</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="math-dropdown open">
                    <div class="nav-item" onclick="toggleMathDropdown()">
                        <div class="dropdown-header">
                            <div class="icon-text">
                                <i class="fas fa-calculator"></i>
                                <span>Math Tools</span>
                            </div>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    <div class="dropdown-content">
                        <a href="graphing-calculator" class="dropdown-item">
                            <i class="fas fa-chart-line"></i>
                            <span>Graphing Calculator</span>
                        </a>
                        <a href="scientific-calculator" class="dropdown-item active">
                            <i class="fas fa-calculator"></i>
                            <span>Scientific Calculator</span>
                        </a>
                    </div>
                </div>
                
                <a href="classes" class="nav-item">
                    <i class="fas fa-book"></i>
                    <span>My Classes</span>
                </a>
                
                <a href="settings" class="nav-item">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
            
            <div class="user-profile">
                <div class="user-avatar" id="userAvatar"></div>
                <div class="user-info">
                    <div class="user-name" id="userName"></div>
                </div>
                <button class="bug-report-btn" onclick="openBugReportModal()" title="Report a Bug">
                    <i class="fas fa-bug"></i>
                </button>
                <button class="signout-btn" onclick="signOut()" title="Sign Out">
                    <i class="fas fa-right-from-bracket"></i>
                </button>
            </div>
        </div>

        <main class="main-content">
            <header class="header">
                <h1><i class="fas fa-calculator"></i> Scientific Calculator</h1>
            </header>

            <div class="content">
                <div class="calculator-wrapper">
                    <div class="calculator">
                        <div class="mode-toggles">
                            <button class="mode-toggle active" onclick="setMode('deg')" id="degBtn">DEG</button>
                            <button class="mode-toggle" onclick="setMode('rad')" id="radBtn">RAD</button>
                        </div>
                        
                        <div class="display">
                            <div class="display-expression" id="expression"></div>
                            <div class="display-result" id="result">0</div>
                        </div>
                        
                        <div class="button-grid">
                            <!-- Row 1 -->
                            <button class="calc-btn function" onclick="inputFunction('sin(')">sin</button>
                            <button class="calc-btn function" onclick="inputFunction('cos(')">cos</button>
                            <button class="calc-btn function" onclick="inputFunction('tan(')">tan</button>
                            <button class="calc-btn function" onclick="inputFunction('log(')">log</button>
                            <button class="calc-btn function" onclick="inputFunction('ln(')">ln</button>
                            
                            <!-- Row 2 -->
                            <button class="calc-btn function" onclick="inputFunction('asin(')">sin⁻¹</button>
                            <button class="calc-btn function" onclick="inputFunction('acos(')">cos⁻¹</button>
                            <button class="calc-btn function" onclick="inputFunction('atan(')">tan⁻¹</button>
                            <button class="calc-btn function" onclick="inputFunction('sqrt(')">√</button>
                            <button class="calc-btn function" onclick="inputText('^')">x^y</button>
                            
                            <!-- Row 3 -->
                            <button class="calc-btn function" onclick="inputText('(')">(</button>
                            <button class="calc-btn function" onclick="inputText(')')">)</button>
                            <button class="calc-btn function" onclick="inputText('%')">%</button>
                            <button class="calc-btn clear" onclick="clearAll()">AC</button>
                            <button class="calc-btn" onclick="backspace()">⌫</button>
                            
                            <!-- Row 4 -->
                            <button class="calc-btn number" onclick="inputText('7')">7</button>
                            <button class="calc-btn number" onclick="inputText('8')">8</button>
                            <button class="calc-btn number" onclick="inputText('9')">9</button>
                            <button class="calc-btn operator" onclick="inputText('/')">÷</button>
                            <button class="calc-btn function" onclick="inputText('pi')">π</button>
                            
                            <!-- Row 5 -->
                            <button class="calc-btn number" onclick="inputText('4')">4</button>
                            <button class="calc-btn number" onclick="inputText('5')">5</button>
                            <button class="calc-btn number" onclick="inputText('6')">6</button>
                            <button class="calc-btn operator" onclick="inputText('*')">×</button>
                            <button class="calc-btn function" onclick="inputText('e')">e</button>
                            
                            <!-- Row 6 -->
                            <button class="calc-btn number" onclick="inputText('1')">1</button>
                            <button class="calc-btn number" onclick="inputText('2')">2</button>
                            <button class="calc-btn number" onclick="inputText('3')">3</button>
                            <button class="calc-btn operator" onclick="inputText('-')">−</button>
                            <button class="calc-btn function" onclick="factorial()">n!</button>
                            
                            <!-- Row 7 -->
                            <button class="calc-btn number" onclick="inputText('0')">0</button>
                            <button class="calc-btn number" onclick="inputText('.')">.</button>
                            <button class="calc-btn operator" onclick="inputText('+')">+</button>
                            <button class="calc-btn equals" onclick="calculate()">=</button>
                        </div>
                    </div>
                    
                    <div class="history-panel">
                        <div class="history-header">
                            <span class="history-title">History</span>
                            <button class="clear-history-btn" onclick="clearHistory()">Clear</button>
                        </div>
                        <div class="history-list" id="historyList">
                            <div class="empty-history">
                                <i class="fas fa-history"></i>
                                <p>No calculations yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="confirmation-modal">
        <div class="confirmation-content">
            <div class="confirmation-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="confirmation-title">Sign Out</div>
            <div class="confirmation-message">Are you sure you want to sign out? This will clear your profile data.</div>
            <div class="confirmation-buttons">
                <button class="confirm-btn cancel" onclick="cancelConfirmation()">Cancel</button>
                <button class="confirm-btn confirm" onclick="confirmSignOut()">Sign Out</button>
            </div>
        </div>
    </div>

    <style>
        .confirmation-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            animation: fadeIn 0.2s ease;
        }
        .confirmation-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .confirmation-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            animation: slideIn 0.3s ease;
            text-align: center;
        }
        body.dark-mode .confirmation-content {
            background: #1e293b;
        }
        .confirmation-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #f59e0b;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 28px;
        }
        .confirmation-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #1e293b;
        }
        body.dark-mode .confirmation-title {
            color: #e2e8f0;
        }
        .confirmation-message {
            font-size: 15px;
            color: #64748b;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        body.dark-mode .confirmation-message {
            color: #94a3b8;
        }
        .confirmation-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        .confirm-btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }
        .confirm-btn.cancel {
            background: #64748b;
            color: white;
        }
        .confirm-btn.cancel:hover {
            background: #475569;
        }
        .confirm-btn.confirm {
            background: #ef4444;
            color: white;
        }
        .confirm-btn.confirm:hover {
            background: #dc2626;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>

    <script src="api.js?v=8"></script>
    <script>
        let expression = '';
        let currentMode = 'deg';
        let history = [];
        
        function init() {
            loadDarkMode();
            loadUserProfile();
            document.querySelector('.user-profile')?.classList.add('loaded');
            loadHistory();
        }
        
        function loadDarkMode() {
            const darkMode = localStorage.getItem('studyDeckDarkMode') === 'true';
            if (darkMode) {
                document.body.classList.add('dark-mode');
            }
        }
        
        function loadUserProfile() {
            const profile = JSON.parse(localStorage.getItem('studyDeckUserProfile'));
            if (profile) {
                const firstInitial = profile.firstName ? profile.firstName.charAt(0).toUpperCase() : '';
                const lastInitial = profile.lastName ? profile.lastName.charAt(0).toUpperCase() : '';
                document.getElementById('userAvatar').textContent = firstInitial + lastInitial || '?';
                document.getElementById('userName').textContent = profile.firstName || 'Guest';
            }
        }
        
        function setMode(mode) {
            currentMode = mode;
            document.getElementById('degBtn').classList.toggle('active', mode === 'deg');
            document.getElementById('radBtn').classList.toggle('active', mode === 'rad');
        }
        
        function inputText(text) {
            expression += text;
            updateDisplay();
        }
        
        function inputFunction(func) {
            expression += func;
            updateDisplay();
        }
        
        function updateDisplay() {
            const expressionEl = document.getElementById('expression');
            const resultEl = document.getElementById('result');
            
            let displayExpr = expression
                .replace(/\*/g, '×')
                .replace(/\//g, '÷')
                .replace(/pi/g, 'π')
                .replace(/sqrt\(/g, '√(')
                .replace(/\^/g, '^');
            
            expressionEl.textContent = displayExpr;
            
            try {
                const result = evaluateExpression(expression);
                if (!isNaN(result) && isFinite(result)) {
                    resultEl.textContent = formatNumber(result);
                }
            } catch (e) {}
        }
        
        function clearAll() {
            expression = '';
            document.getElementById('expression').textContent = '';
            document.getElementById('result').textContent = '0';
        }
        
        function backspace() {
            const functions = ['sin(', 'cos(', 'tan(', 'asin(', 'acos(', 'atan(', 'log(', 'ln(', 'sqrt('];
            for (const func of functions) {
                if (expression.endsWith(func)) {
                    expression = expression.slice(0, -func.length);
                    updateDisplay();
                    return;
                }
            }
            expression = expression.slice(0, -1);
            updateDisplay();
            if (expression === '') {
                document.getElementById('result').textContent = '0';
            }
        }
        
        function factorial() {
            expression += '!';
            updateDisplay();
        }
        
        function evaluateExpression(expr) {
            let evalExpr = expr
                .replace(/pi/g, 'Math.PI')
                .replace(/e(?![a-z])/g, 'Math.E')
                .replace(/\^/g, '**')
                .replace(/sqrt/g, 'Math.sqrt')
                .replace(/log/g, 'Math.log10')
                .replace(/ln/g, 'Math.log');
            
            if (currentMode === 'deg') {
                evalExpr = evalExpr
                    .replace(/sin\(/g, 'Math.sin(Math.PI/180*')
                    .replace(/cos\(/g, 'Math.cos(Math.PI/180*')
                    .replace(/tan\(/g, 'Math.tan(Math.PI/180*')
                    .replace(/asin\(/g, '(180/Math.PI)*Math.asin(')
                    .replace(/acos\(/g, '(180/Math.PI)*Math.acos(')
                    .replace(/atan\(/g, '(180/Math.PI)*Math.atan(');
            } else {
                evalExpr = evalExpr
                    .replace(/sin\(/g, 'Math.sin(')
                    .replace(/cos\(/g, 'Math.cos(')
                    .replace(/tan\(/g, 'Math.tan(')
                    .replace(/asin\(/g, 'Math.asin(')
                    .replace(/acos\(/g, 'Math.acos(')
                    .replace(/atan\(/g, 'Math.atan(');
            }
            
            evalExpr = evalExpr.replace(/(\d+)!/g, 'factorial($1)');
            
            const factorialFn = (n) => {
                if (n < 0) return NaN;
                if (n === 0 || n === 1) return 1;
                let result = 1;
                for (let i = 2; i <= n; i++) result *= i;
                return result;
            };
            
            return new Function('factorial', 'return ' + evalExpr)(factorialFn);
        }
        
        function formatNumber(num) {
            if (Number.isInteger(num)) return num.toString();
            if (Math.abs(num - Math.round(num)) < 1e-10) return Math.round(num).toString();
            const str = num.toPrecision(10);
            return parseFloat(str).toString();
        }
        
        function calculate() {
            if (!expression) return;
            
            try {
                const result = evaluateExpression(expression);
                
                if (isNaN(result)) {
                    document.getElementById('result').textContent = 'Error';
                    return;
                }
                
                if (!isFinite(result)) {
                    document.getElementById('result').textContent = result > 0 ? '∞' : '-∞';
                    return;
                }
                
                const formattedResult = formatNumber(result);
                document.getElementById('result').textContent = formattedResult;
                
                addToHistory(expression, formattedResult);
                expression = formattedResult;
                document.getElementById('expression').textContent = '';
            } catch (e) {
                document.getElementById('result').textContent = 'Error';
            }
        }
        
        function addToHistory(expr, result) {
            history.unshift({ expression: expr, result: result });
            if (history.length > 20) history.pop();
            saveHistory();
            renderHistory();
        }
        
        function saveHistory() {
            localStorage.setItem('calculatorHistory', JSON.stringify(history));
        }
        
        function loadHistory() {
            const saved = localStorage.getItem('calculatorHistory');
            if (saved) {
                history = JSON.parse(saved);
                renderHistory();
            }
        }
        
        function clearHistory() {
            history = [];
            saveHistory();
            renderHistory();
        }
        
        function renderHistory() {
            const list = document.getElementById('historyList');
            
            if (history.length === 0) {
                list.innerHTML = '<div class="empty-history"><i class="fas fa-history"></i><p>No calculations yet</p></div>';
                return;
            }
            
            list.innerHTML = history.map((item, index) => `
                <div class="history-item" onclick="useHistoryItem(${index})">
                    <div class="history-expression">${formatHistoryExpression(item.expression)}</div>
                    <div class="history-result">= ${item.result}</div>
                </div>
            `).join('');
        }
        
        function formatHistoryExpression(expr) {
            return expr
                .replace(/\*/g, '×')
                .replace(/\//g, '÷')
                .replace(/pi/g, 'π')
                .replace(/sqrt\(/g, '√(');
        }
        
        function useHistoryItem(index) {
            expression = history[index].result;
            updateDisplay();
        }
        
        document.addEventListener('keydown', (e) => {
            const key = e.key;
            if (/[0-9]/.test(key)) inputText(key);
            else if (['+', '-', '*', '/'].includes(key)) inputText(key);
            else if (key === '.') inputText('.');
            else if (key === 'Enter' || key === '=') { e.preventDefault(); calculate(); }
            else if (key === 'Backspace') backspace();
            else if (key === 'Escape') clearAll();
            else if (key === '(' || key === ')') inputText(key);
            else if (key === '^') inputText('^');
        });
        
        function toggleMobileMenu() {
            document.querySelector('.sidebar').classList.toggle('active');
            document.querySelector('.mobile-overlay').classList.toggle('active');
        }
        
        function toggleDropdown() {
            document.querySelector('.ai-dropdown').classList.toggle('open');
        }
        
        function toggleMathDropdown() {
            document.querySelector('.math-dropdown').classList.toggle('open');
        }
        
        function signOut() {
            document.getElementById('confirmationModal').classList.add('show');
        }
        
        function cancelConfirmation() {
            document.getElementById('confirmationModal').classList.remove('show');
        }
        
        function confirmSignOut() {
            // Clear all user data from localStorage
            localStorage.removeItem('studyDeckUserProfile');
            localStorage.removeItem('studyDeckDarkMode');
            localStorage.removeItem('studyDeckFlashcards');
            localStorage.removeItem('studyDeckTodos');
            localStorage.removeItem('studyDeckNotes');
            localStorage.removeItem('studyDeckClasses');
            localStorage.removeItem('studyDeckActivityLog');
            localStorage.removeItem('studyDeckTasks');
            localStorage.removeItem('studyDeckPomodoroSessions');
            localStorage.removeItem('studyDeckPomodoroSettings');
            localStorage.removeItem('studyDeckPomodoroStats');
            localStorage.removeItem('studyDeckEvents');
            window.location.href = '/';
        }
        
        // Close modal on background click
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('confirmationModal');
            if (e.target === modal) {
                cancelConfirmation();
            }
        });
        
        document.addEventListener('DOMContentLoaded', async function() {
            // Wait for API to be ready (for dark mode and user profile)
            await vieraAPI.ready;
            init();
        });

        // ============ BUG REPORT FUNCTIONALITY ============
        const BUG_REPORT_URL = 'https://script.google.com/macros/s/AKfycbxW5D6i7Td2Em-OqHmCpgy-DVQuzn1oCzn_pBRB2IOb_8MGfwgPqjF8KghYQDZpMNdKUw/exec';
        function openBugReportModal() { document.getElementById('bugReportModal').classList.add('active'); document.getElementById('bugPage').value = window.location.href; document.getElementById('bugPageName').textContent = 'Scientific Calculator'; const user = vieraAPI.getUser(); if (user) { document.getElementById('bugUserEmail').value = user.email || ''; document.getElementById('bugUserName').value = `${user.firstName || ''} ${user.lastName || ''}`.trim(); } }
        function closeBugReportModal() { document.getElementById('bugReportModal').classList.remove('active'); }
        function getBrowserInfo() { const ua = navigator.userAgent; let browser = 'Unknown'; if (ua.includes('Firefox')) browser = 'Firefox'; else if (ua.includes('Chrome') && !ua.includes('Edg')) browser = 'Chrome'; else if (ua.includes('Safari') && !ua.includes('Chrome')) browser = 'Safari'; else if (ua.includes('Edg')) browser = 'Edge'; if (/iPhone|iPad|iPod|Android/i.test(ua)) browser += ' (Mobile)'; return browser; }
        async function submitBugReport(event) { event.preventDefault(); const btn = event.target.querySelector('button[type="submit"]'); const originalContent = btn.innerHTML; btn.disabled = true; btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...'; const bugData = { page: document.getElementById('bugPage').value, pageName: 'Scientific Calculator', category: document.getElementById('bugCategory').value, description: document.getElementById('bugDescription').value, userEmail: document.getElementById('bugUserEmail').value || 'Anonymous', userName: document.getElementById('bugUserName').value || 'Anonymous', browser: getBrowserInfo(), screenSize: `${window.innerWidth}x${window.innerHeight}`, userAgent: navigator.userAgent }; try { await fetch(BUG_REPORT_URL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(bugData) }); alert('Bug report submitted successfully!'); closeBugReportModal(); document.getElementById('bugDescription').value = ''; } catch (error) { alert('Failed to submit bug report.'); } finally { btn.disabled = false; btn.innerHTML = originalContent; } }
        document.addEventListener('keydown', function(e) { if (e.key === 'Escape') closeBugReportModal(); });
    </script>
    <div id="bugReportModal" class="bug-modal"><div class="bug-modal-content"><div class="bug-modal-header"><div class="bug-modal-title"><i class="fas fa-bug"></i> Report a Bug</div><button class="bug-close-btn" onclick="closeBugReportModal()"><i class="fas fa-times"></i></button></div><div class="bug-page-info"><i class="fas fa-link"></i><span>Reporting from: <strong id="bugPageName">Scientific Calculator</strong></span><input type="hidden" id="bugPage" value=""></div><form onsubmit="submitBugReport(event)"><div class="bug-form-group"><label class="bug-form-label">Category</label><select class="bug-form-select" id="bugCategory" required><option value="General">General Issue</option><option value="UI/Design">UI/Design Problem</option><option value="Functionality">Feature Not Working</option><option value="Performance">Performance Issue</option><option value="Login/Account">Login/Account Problem</option><option value="Data Loss">Data Loss</option><option value="Mobile">Mobile-Specific Issue</option><option value="Other">Other</option></select></div><div class="bug-form-group"><label class="bug-form-label">Describe the bug *</label><textarea class="bug-form-textarea" id="bugDescription" placeholder="Please describe what happened..." required></textarea></div><div class="bug-form-group"><label class="bug-form-label">Your Email (optional)</label><input type="email" class="bug-form-input" id="bugUserEmail" placeholder="your@email.com"></div><div class="bug-form-group"><label class="bug-form-label">Your Name (optional)</label><input type="text" class="bug-form-input" id="bugUserName" placeholder="Your name"></div><button type="submit" class="bug-submit-btn"><i class="fas fa-paper-plane"></i> Submit Bug Report</button></form></div></div>
</body>
</html>
